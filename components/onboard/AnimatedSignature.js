import React, { useEffect } from 'react';
import { View } from 'react-native';
import Svg, { Path } from 'react-native-svg';
import Animated, { useSharedValue, useAnimatedProps, withTiming } from 'react-native-reanimated';

const AnimatedPath = Animated.createAnimatedComponent(Path);

const AnimatedSignature = ({ delay }) => {
  const pathLength = 1000; // Replace with the actual length of your SVG path
  const animatedStroke = useSharedValue(pathLength);

  useEffect(() => {
    const timer = setTimeout(() => {
      animatedStroke.value = withTiming(0, { duration: 3000 });
    }, delay);
    return () => clearTimeout(timer);
  }, []);

  const animatedProps = useAnimatedProps(() => ({
    strokeDashoffset: animatedStroke.value,
  }));

  return (
    <View style={{flexDirection: "row", width: "75%", paddingLeft: 20}}> 
      <Svg height="120" width="50%" viewBox="0 0 150 50" >
        <AnimatedPath
          animatedProps={animatedProps}
          d="M13.8462 10.7367C9.5365 11.9819 5.81725 23.0471 4.75146 26.8886C3.4242 31.6726 2.12128 36.9985 2.24782 42.0385C2.36829 46.8362 7.46502 48.2164 11.4222 47.9272C20.7973 47.2422 29.8072 33.0772 34.4765 26.2476C36.9843 22.5795 40.1655 17.7321 41.6633 13.5541C42.8328 10.2919 43.644 6.64264 45.4452 3.64877C46.793 1.40861 46.118 3.55341 45.9712 5.02785C45.5042 9.7176 44.6472 14.1708 43.7954 18.7889C43.5358 20.1965 41.0627 33.8387 41.2166 33.7418C44.3823 31.7492 47.8005 25.2042 49.8253 21.9954C51.1494 19.8971 53.8306 16.0873 56.1573 18.3615C59.1219 21.2592 60.7754 20.2526 63.5692 16.7305C64.4052 15.6766 68.612 6.9968 68.6132 6.99822C68.9598 7.42142 69.0631 9.23961 69.3651 9.91602C70.4838 12.4219 72.3795 10.8456 74.0519 9.95629C76.5161 8.64585 76.2702 5.86542 79.5441 6.19142C82.4953 6.4853 85.4531 6.86746 88.4114 7.07442C90.1375 7.19519 98.9668 0.920364 99.1245 1.79202C99.4325 3.49377 97.1119 5.8469 95.927 6.78042C91.4136 10.3362 88.332 7.21718 86.2142 3.44412"
          fill="none"
          stroke="#f49b67"
          strokeWidth="2"
          strokeDasharray={pathLength}
        />
      </Svg>
      <Svg height="120" width="50%" viewBox="0 0 150 100">
        <AnimatedPath
          animatedProps={animatedProps}
          d="M27.4096 53.5431C27.4096 46.3046 26.4667 38.2439 28.0381 31.1264C29.5767 24.1572 32.9018 19.7021 37.4656 14.4361C41.2794 10.0356 45.0098 6.372 49.4072 2.6342C53.915 -1.19745 50.3764 9.23443 50.1754 9.89692C46.8995 20.6952 44.1759 31.5996 39.9797 42.0903C33.1902 59.064 25.1069 75.6177 17.6328 92.3008C15.6905 96.6365 12.1574 101.497 8.06559 104.173C7.25185 104.705 3.56551 105.9 2.89788 104.731C1.65689 102.56 2.09261 99.03 2.3043 96.5956C2.59891 93.2076 5.56176 89.7763 7.57675 87.2728C11.6727 82.184 15.5738 76.9472 19.9024 72.049C27.4459 63.513 35.7065 55.6161 43.0873 46.9438C47.5192 41.7362 52.0706 36.444 57.5778 32.3136C59.5826 30.8099 63.0658 27.9463 64.3517 25.8889C65.3 24.3715 65.1198 31.5874 65.1198 32.8024C65.1198 34.7097 63.9248 38.0901 66.3768 34.5483C67.8688 32.3932 69.9418 29.7188 72.3476 30.2535C77.343 31.3636 86.5817 29.138 90.2949 25.8889C96.183 20.7368 104.716 14.6429 104.716 6.09097C104.716 4.70089 104.569 2.72087 102.551 3.29762C100.855 3.7822 99.3065 7.30699 98.675 8.57007C93.8567 18.2066 90.2885 28.4419 86.7683 38.5986C80.4628 56.7916 75.7811 74.9357 71.1255 93.5579C70.7451 95.0798 69.5194 103.276 69.5194 98.3066C69.5194 87.5042 72.1296 77.263 65.7483 67.859C62.4216 62.9565 54.1829 63.3032 48.9882 62.831C41.0821 62.1122 33.1462 62.3421 25.2098 62.3421C20.9034 62.3421 16.597 62.3421 12.2905 62.3421C11.3917 62.3421 9.80004 62.6518 8.93851 62.3072C6.61089 61.3762 13.6372 60.5517 16.0266 59.7932C29.3715 55.5567 43.287 52.8319 56.9144 49.7022C73.2413 45.9525 89.4336 41.8058 105.623 37.5162C112.223 35.7677 119.012 34.3336 125.491 32.1739C127.578 31.4783 130.134 30.2884 132.37 30.2884"
          fill="none"
          stroke="#f49b67"
          strokeWidth="2"
          strokeDasharray={pathLength}
        />
      </Svg>
    </View>
  );
};

export default AnimatedSignature;
